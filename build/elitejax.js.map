{"version":3,"sources":["webpack:///webpack/bootstrap 827f8d2e1203eceb64fd","webpack:///./src/index.es6"],"names":["Elitejax","config","window","callback","ajaxForm","getEl","name","defaultConfig","async","cType","resType","data","console","log","prop","undefined","res","elem","document","querySelectorAll","Array","from","forEach","val","getAttribute","push","formEl","num","length","i","valid","validInput","inputEl","toLowerCase","value","ex","obj","cbName","str","key","el","v","addEventListener","e","preventDefault","target","action","method","toUpperCase","getElVal","elements","configure","ajaxIt","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","response","responseText","JSON","parse","open","params","setRequestHeader","send","script","createElement","type","Date","now","src","getElementsByTagName","appendChild","ej","elitejax"],"mappings":"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","file":"elitejax.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 827f8d2e1203eceb64fd\n **/","'use strict';\n\nclass Elitejax {\n  // get config via object for elitejax constructor\n  constructor () {\n    this.config = {};\n    window.callback = {}; // add callback object to window\n    this.ajaxForm(this.getEl());\n  }\n\n  // function to add configurations to selected forms\n  configure (name, config = {}) {\n    // set default configuration\n    const defaultConfig = {\n      async: true,\n      cType: 'application/json',\n      resType: 'json',\n      callback: function (data) {\n        console.log(data);\n      }\n    };\n\n    for (let prop in defaultConfig) {\n      if (config[prop] === undefined) {\n        config[prop] = defaultConfig[prop];\n      }\n    }\n\n    this.config[name] = config;\n    return this.config[name];\n  }\n\n  // gets elements that has been marked for elitejax\n  getEl () {\n    const res = [];\n    const elem = document.querySelectorAll('form');\n    Array.from(elem).forEach((val) => {\n      if (val.getAttribute('data-elitejax') !== null) {\n        res.push(val);\n      }\n    });\n    return res;\n  }\n\n  // gets value from form elements\n  getElVal (formEl) {\n    const res = {};\n    const num = formEl.length;\n    for (let i = 0; i < num; i++) {\n      const valid = this.validInput(formEl[i]);\n      if (valid[0]) {\n        res[valid[1]] = valid[2];\n      }\n    }\n    return res;\n  }\n\n  // validate user inputs according to input types\n  validInput (inputEl) {\n    const val = [true, '', ''];\n    const name = inputEl.name.toLowerCase();\n    const value = inputEl.value;\n    const ex = inputEl.getAttribute('data-ej-x');\n    if (name !== '' && value !== '' && name !== 'submit' && value !== 'submit' && ex === null) {\n      val[1] = name;\n      val[2] = value;\n    } else {\n      val[0] = false;\n    }\n    return val;\n  }\n\n  // convert object to url parameter\n  params (obj = {}, resType = '', cbName = '') {\n    var str = '';\n    str = (resType === 'jsonp') ? `?${str}callback=${cbName}` : str;\n    for (var key in obj) {\n        if (str !== '') {\n            str += '&';\n        }\n        str += `${key}=${obj[key]}`;\n    }\n    return str;\n  }\n\n  ajaxForm (el) {\n    // Loop through all the elements\n    el.forEach((v, i) => {\n      // add on {listen} event listener to all of them\n      v.addEventListener('submit', (e) => {\n        e.preventDefault(); // stop submission\n        let name = e.target.getAttribute('name');\n        let action = e.target.getAttribute('action');\n        let method = e.target.getAttribute('method').toUpperCase();\n        let data = this.getElVal(e.target.elements); // data for ajax\n        // build complete configuration\n        if (this.config[name] === undefined) {\n          this.configure(name);\n        }\n        this.ajaxIt(action, method, data, this.config[name]);\n      });\n    });\n  }\n\n  ajaxIt (action, method, data, config) {\n    // destructure configuration for given form\n    var { async, cType, resType, callback } = config;\n    // get AJAX ready\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() {\n      if (this.readyState === 4 && this.status === 200) {\n        let response = this.responseText;\n        if (resType === 'json') {\n          response = JSON.parse(response);\n          callback(response);\n        }\n      }\n    };\n    // make request\n    if (method === 'GET' && resType !== 'jsonp') {\n      xhttp.open(method, action + '?' + this.params(data), async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send();\n    } else if (method === 'GET' && resType === 'jsonp') {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      // create random callback name\n      const cbName = `ej_${Date.now()}`;\n      // create add callback function to global callback object\n      window.callback[cbName] = callback;\n      // send data and callback function name to be added as parameters\n      script.src = action + this.params(data, resType, `callback.${cbName}`);\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } else {\n      xhttp.open(method, action, async);\n      xhttp.setRequestHeader('Content-type', cType);\n      xhttp.send(this.params(data));\n    }\n  }\n\n}\n\nlet ej = () => {\n  return new Elitejax();\n};\n\n// make module available to browser\nwindow.ej = window.elitejax = ej();\n\n// call our class instanciator, whatever the name is\nej;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.es6\n **/"],"sourceRoot":""}